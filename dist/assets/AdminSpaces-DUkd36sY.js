import{a as j,r as l,j as a,y as p}from"./index-CkFDTInH.js";import{u as y}from"./formik.esm-DURCDBCU.js";import{c as N,e as o,d as C,a as d}from"./index.esm-DHsu0I8t.js";import{a as A}from"./api-DZWw9RV8.js";import{H as S}from"./Helmet-QCzmYxYa.js";function k(){let h=j();const[c,s]=l.useState(!1),[m,g]=l.useState(null),[n,v]=l.useState([]);async function x(r){try{s(!0);const u=localStorage.getItem("adminToken"),i=new FormData;if(i.append("name",r.name),i.append("description",r.description),i.append("size",r.size),i.append("ratingsAverage",r.ratingsAverage),i.append("ratingsQuantity",r.ratingsQuantity),i.append("available",r.available),i.append("price",r.price),m&&i.append("imageCover",m),n.length>0)for(let t=0;t<n.length;t++)i.append("images",n[t]);const{data:b}=await A.post("/api/v1/spaces",i,{headers:{Authorization:`Bearer ${u}`,"Content-Type":"multipart/form-data"}});console.log(b.Status),p.success("Space added successfully"),h("/admin-dashboard"),s(!1)}catch{s(!1),p.error("Failed to add space, please try again!")}}const f=N({name:d().required("Name is required"),description:d().required("Description is required"),size:d().required("Size is required"),ratingsAverage:o().min(0).max(5).required("Ratings Average is required"),ratingsQuantity:o().required("Ratings Quantity is required"),available:C().required("Availability is required"),price:o().required("Price is required").min(0,"Price must be positive")});let e=y({initialValues:{name:"",description:"",size:"",ratingsAverage:"",ratingsQuantity:"",available:!1,price:""},validationSchema:f,onSubmit:x});return a.jsxs(a.Fragment,{children:[a.jsx(S,{children:a.jsx("title",{children:"Spaces"})}),a.jsx("section",{className:"admin-spaces my-5 py-5",children:a.jsx("div",{className:"container mt-5 pt-4",children:a.jsx("div",{className:"row justify-content-center",children:a.jsx("div",{className:"col-md-8",children:a.jsxs("form",{className:"p-4",onSubmit:e.handleSubmit,children:[a.jsx("h3",{className:"text-center mb-4",children:"Add Space"}),a.jsxs("div",{className:"form-floating mb-3",children:[a.jsx("input",{type:"text",id:"name",placeholder:"Name",className:"form-control",value:e.values.name,onChange:e.handleChange,onBlur:e.handleBlur}),a.jsx("label",{htmlFor:"name",children:"Name"}),e.errors.name&&e.touched.name&&a.jsx("div",{className:"alert alert-danger p-2 my-2 rounded-0",children:e.errors.name})]}),a.jsxs("div",{className:"form-floating mb-3",children:[a.jsx("input",{type:"text",id:"description",placeholder:"Description",className:"form-control",value:e.values.description,onChange:e.handleChange,onBlur:e.handleBlur}),a.jsx("label",{htmlFor:"description",children:"Description"}),e.errors.description&&e.touched.description&&a.jsx("div",{className:"alert alert-danger p-2 my-2 rounded-0",children:e.errors.description})]}),a.jsxs("div",{className:"form-floating mb-3",children:[a.jsx("input",{type:"text",id:"size",placeholder:"Size",className:"form-control",value:e.values.size,onChange:e.handleChange,onBlur:e.handleBlur}),a.jsx("label",{htmlFor:"size",children:"Size"}),e.errors.size&&e.touched.size&&a.jsx("div",{className:"alert alert-danger p-2 my-2 rounded-0",children:e.errors.size})]}),a.jsxs("div",{className:"form-floating mb-3",children:[a.jsx("input",{type:"number",id:"price",placeholder:"Price",className:"form-control",value:e.values.price,onChange:e.handleChange,onBlur:e.handleBlur}),a.jsx("label",{htmlFor:"price",children:"Price"}),e.errors.price&&e.touched.price&&a.jsx("div",{className:"alert alert-danger p-2 my-2 rounded-0",children:e.errors.price})]}),a.jsxs("div",{className:"form-floating mb-3",children:[a.jsx("input",{type:"number",id:"ratingsAverage",placeholder:"Ratings Average",className:"form-control",value:e.values.ratingsAverage,onChange:e.handleChange,onBlur:e.handleBlur}),a.jsx("label",{htmlFor:"ratingsAverage",children:"Ratings Average"}),e.errors.ratingsAverage&&e.touched.ratingsAverage&&a.jsx("div",{className:"alert alert-danger p-2 my-2 rounded-0",children:e.errors.ratingsAverage})]}),a.jsxs("div",{className:"form-floating mb-3",children:[a.jsx("input",{type:"number",id:"ratingsQuantity",placeholder:"Ratings Quantity",className:"form-control",value:e.values.ratingsQuantity,onChange:e.handleChange,onBlur:e.handleBlur}),a.jsx("label",{htmlFor:"ratingsQuantity",children:"Ratings Quantity"}),e.errors.ratingsQuantity&&e.touched.ratingsQuantity&&a.jsx("div",{className:"alert alert-danger p-2 my-2 rounded-0",children:e.errors.ratingsQuantity})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{htmlFor:"imageCover",className:"form-label",children:"Image Cover"}),a.jsx("input",{type:"file",id:"imageCover",className:"form-control",accept:"image/*",onChange:r=>g(r.target.files[0])})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{htmlFor:"images",className:"form-label",children:"Images"}),a.jsx("input",{type:"file",id:"images",className:"form-control",accept:"image/*",multiple:!0,onChange:r=>v(Array.from(r.target.files))})]}),a.jsxs("div",{className:"form-check mb-3",children:[a.jsx("input",{type:"checkbox",id:"available",className:"form-check-input",checked:e.values.available,onChange:e.handleChange,onBlur:e.handleBlur}),a.jsx("label",{className:"form-check-label",htmlFor:"available",children:"Available"}),e.errors.available&&e.touched.available&&a.jsx("div",{className:"alert alert-danger p-2 my-2 rounded-0",children:e.errors.available})]}),a.jsx("button",{type:"submit",className:"btn btn-danger rounded-0 text-center mx-auto w-100",disabled:c||!(e.isValid&&e.dirty),children:c?"Submitting...":"Add Space"})]})})})})})]})}export{k as default};
