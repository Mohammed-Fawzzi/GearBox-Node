import{a as u,r as p,j as e,y as o}from"./index-CkFDTInH.js";import{u as w}from"./formik.esm-DURCDBCU.js";import{c as h,a as n,b as f}from"./index.esm-DHsu0I8t.js";import{a as g}from"./api-DZWw9RV8.js";function v(){const d=u(),[t,r]=p.useState(!1);async function i(c){try{r(!0);const a=localStorage.getItem("resetToken");if(!a){o.error("Token is missing. Please try again.");return}const{data:m}=await g.patch("/api/v1/users/resetPassword",c,{headers:{Authorization:`Bearer ${a}`}});console.log(m.status),o.success("Password reset successfully"),localStorage.removeItem("resetToken"),d("/sign-in",{replace:!0}),r(!1)}catch{r(!1),o.error("Failed to reset password. Try again!")}}const l=h({password:n().min(6,"Password must be at least 6 characters").required("Password is required"),passwordConfirm:n().oneOf([f("password"),null],"Passwords must match").required("Confirm password is required")}),s=w({initialValues:{password:"",passwordConfirm:""},validationSchema:l,onSubmit:i});return e.jsx("section",{className:"reset-password my-5 py-5",children:e.jsx("div",{className:"container mt-5 pt-4",children:e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-md-8",children:e.jsxs("form",{className:"p-4",onSubmit:s.handleSubmit,children:[e.jsx("h3",{className:"text-center mb-4",children:"Reset Password"}),e.jsxs("div",{className:"form-floating mb-3",children:[e.jsx("input",{type:"password",id:"password",placeholder:"Enter your new password",className:"form-control",value:s.values.password,onChange:s.handleChange,onBlur:s.handleBlur}),e.jsx("label",{htmlFor:"password",children:"New Password"}),s.errors.password&&s.touched.password?e.jsx("div",{className:"alert alert-danger p-2 my-2 rounded-0",children:s.errors.password}):""]}),e.jsxs("div",{className:"form-floating mb-3",children:[e.jsx("input",{type:"password",id:"passwordConfirm",placeholder:"Confirm your password",className:"form-control",value:s.values.passwordConfirm,onChange:s.handleChange,onBlur:s.handleBlur}),e.jsx("label",{htmlFor:"passwordConfirm",children:"Confirm Password"}),s.errors.passwordConfirm&&s.touched.passwordConfirm?e.jsx("div",{className:"alert alert-danger p-2 my-2 rounded-0",children:s.errors.passwordConfirm}):""]}),e.jsx("button",{type:"submit",className:"btn btn-danger rounded-0 text-center mx-auto w-100",disabled:t||!(s.isValid&&s.dirty),children:t?"Resetting...":"Reset Password"})]})})})})})}export{v as default};
