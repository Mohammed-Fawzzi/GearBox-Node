import{r as n,j as e,L as f,y as l}from"./index-DoYqLEuC.js";import{a as m}from"./api-BDs2Ot40.js";import{M as N}from"./index-DJ_sMM-V.js";import{H as b}from"./Helmet-lAKtP1rb.js";function P(){const[h,r]=n.useState(!1),[o,x]=n.useState([]);async function g(){try{r(!0);const{data:s}=await m.get("/api/v1/packages");x(s.data.package),r(!1)}catch{r(!1),l.error("Failed to fetch packages")}}n.useEffect(()=>{g()},[]);async function p(s){try{const c=localStorage.getItem("userToken"),{data:t}=await m.get(`/api/v1/bookings/checkout-session-package/${s}`,{headers:{Authorization:`Bearer ${c}`}});t.session&&t.session.url?window.location.href=t.session.url:l.error("Failed to initiate checkout session.")}catch{l.error("Something went wrong during checkout.")}}return e.jsxs(e.Fragment,{children:[e.jsx(b,{children:e.jsx("title",{children:"Packages"})}),e.jsx("section",{className:"packages my-5 py-5",children:e.jsxs("div",{className:"container mt-5 pt-3",children:[e.jsx("h3",{className:"text-center mb-4",children:"Packages"}),h?e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"spinner-border text-danger",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):o.length===0?e.jsx("p",{className:"text-center text-muted",children:"No packages found"}):e.jsx("div",{className:"row g-4",children:o.map(s=>{var c,t,d;return e.jsx("div",{className:"col-12 col-md-6 col-lg-4 mb-4 h-100",children:e.jsxs("div",{className:"package-card p-4 bg-white rounded-lg w-100 h-100 d-flex flex-column border border-danger rounded-3",children:[e.jsxs(f,{to:`/packages/${s._id}`,className:"text-decoration-none text-dark d-block",children:[e.jsx("div",{className:"text-center mb-3",children:e.jsx("img",{src:s.imageCover&&s.imageCover!=="undefined"?`http://localhost:3000/img/packages/${s.imageCover}`:"https://placehold.co/600x400",alt:s.name,className:"img-fluid rounded",style:{height:"250px",objectFit:"cover"}})}),e.jsxs("h5",{className:"fw-semibold text-danger text-center pb-2",children:["[ ",s.name," ]"]}),e.jsxs("p",{className:"text-muted",children:[e.jsx("strong",{children:"📝 Description:"})," ",s.description]}),e.jsxs("p",{className:"text-muted",children:[e.jsx("strong",{children:"💲 Price:"})," $",s.price]}),s.space&&e.jsxs("div",{className:"pb-3",children:[e.jsx("strong",{children:"🛋 Space:"})," ",s.space.name]}),((t=(c=s.space)==null?void 0:c.images)==null?void 0:t.length)>0&&e.jsx("div",{className:"d-flex flex-wrap gap-2 mt-2",children:s.space.images.map((a,i)=>e.jsx("img",{src:`http://localhost:3000/img/spaces/${a}`,alt:s.space.name,className:"img-fluid rounded me-2 mb-2",style:{width:"80px",height:"80px",objectFit:"cover"}},i))}),((d=s.Technology)==null?void 0:d.length)>0&&e.jsxs("div",{className:"pt-3",children:[e.jsx("strong",{children:"🔧 Technologies:"}),e.jsx("ul",{className:"list-unstyled",children:s.Technology.map(a=>{var i;return a&&e.jsxs("li",{className:"mb-2",children:[e.jsxs("span",{className:"fw-semibold d-block",children:["- ",a.name]}),((i=a.images)==null?void 0:i.length)>0&&e.jsx("div",{className:"d-flex flex-wrap gap-2",children:a.images.map((u,j)=>e.jsx("img",{src:`http://localhost:3000/img/technologys/${u}`,alt:a.name,className:"img-fluid rounded me-2 mb-2",style:{width:"80px",height:"80px",objectFit:"cover"}},j))})]},a._id)})})]})]}),e.jsxs("button",{className:"btn btn-danger mt-auto",onClick:()=>p(s._id),children:["Pay Now ",e.jsx(N,{})]})]})},s._id)})})]})})]})}export{P as default};
