import{a as f,r as t,j as e,y as l}from"./index-DoYqLEuC.js";import{a as n}from"./api-BDs2Ot40.js";import{u as j}from"./formik.esm-DO93-7Li.js";import{H as b}from"./Helmet-lAKtP1rb.js";function F(){let i=f();const[c,o]=t.useState(!1),[m,d]=t.useState([]),[h,u]=t.useState([]);async function g(){try{o(!0);const{data:a}=await n.get("/api/v1/spaces");d(a.data.spaces),o(!1)}catch{o(!1),l.error("Failed to fetch spaces")}}async function p(){try{o(!0);const{data:a}=await n.get("/api/v1/technology");u(a.data.technology),o(!1)}catch{o(!1),l.error("Failed to fetch technology data")}}async function x(a){try{const r=localStorage.getItem("userToken");o(!0);const{data:v}=await n.post("api/v1/customebookings",a,{headers:{Authorization:`Bearer ${r}`}});l.success("Booking created successfully!"),i("/custom-booking"),o(!1)}catch{o(!1),l.error("Failed to create Booking, please try again!")}}t.useEffect(()=>{g(),p()},[]);const s=j({initialValues:{name:localStorage.getItem("userName")??"",email:localStorage.getItem("userEmail")??"",phone:"",date:"",space:"",technology:""},onSubmit:x});return e.jsxs(e.Fragment,{children:[e.jsx(b,{children:e.jsx("title",{children:"Booking"})}),e.jsx("section",{className:"booking my-5 py-5",children:e.jsx("div",{className:"container mt-5 pt-3",children:e.jsx("div",{className:"row justify-content-center",children:e.jsxs("div",{className:"col-md-8",children:[e.jsx("h2",{className:"text-center mb-4",children:"Studio Booking Form"}),e.jsx("p",{className:"text-center mb-5",children:"Please complete the following form to request a studio booking with Gearbox Studios. Your detailed information helps us provide you with the best possible service."}),e.jsxs("form",{onSubmit:s.handleSubmit,children:[e.jsx("div",{className:"row mb-3",children:e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"form-label",children:["Name ",e.jsx("span",{className:"text-danger",children:"(required)"})]}),e.jsx("input",{type:"text",className:"form-control",id:"name",name:"name",value:s.values.name,readOnly:!0})]})}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"email",className:"form-label",children:["Email ",e.jsx("span",{className:"text-danger",children:"(required)"})]}),e.jsx("input",{type:"email",className:"form-control read-only",id:"email",name:"email",value:s.values.email,readOnly:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"phone",className:"form-label",children:"Phone"}),e.jsx("input",{type:"tel",className:"form-control",id:"phone",name:"phone",value:s.values.phone,onChange:s.handleChange})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"date",className:"form-label",children:"Booking Date"}),e.jsx("input",{type:"date",className:"form-control w-100",id:"date",name:"date",value:s.values.date,onChange:s.handleChange})]}),e.jsxs("div",{className:"form-floating mb-3",children:[e.jsxs("select",{id:"space",className:"form-control",value:s.values.space,onChange:s.handleChange,children:[e.jsx("option",{value:"",children:"Select Space"}),m.map(a=>e.jsx("option",{value:a._id,children:a.name},a._id))]}),e.jsx("label",{htmlFor:"space",children:"Space"})]}),e.jsxs("div",{className:"form-floating mb-3",children:[e.jsxs("select",{id:"technology",name:"technology",className:"form-control",value:s.values.technology,onChange:s.handleChange,children:[e.jsx("option",{value:"",children:"Select Technology"}),h.map(a=>e.jsx("option",{value:a._id,children:a.name},a._id))]}),e.jsx("label",{htmlFor:"technology",children:"Technology"})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"submit",className:"btn btn-danger w-100 rounded-0",children:c?"Processing...":"Book Now"})})]})]})})})})]})}export{F as default};
