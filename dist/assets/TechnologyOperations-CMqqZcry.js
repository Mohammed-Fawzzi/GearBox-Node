import{r as s,j as e,R as k,y as t}from"./index-DoYqLEuC.js";import{a as i}from"./api-BDs2Ot40.js";import{F as A}from"./index-D7reRtq0.js";import{H as D}from"./Helmet-lAKtP1rb.js";function E(){const[o,d]=s.useState([]),[f,r]=s.useState(!1),[T,c]=s.useState(!1),[m,C]=s.useState(null),[h,p]=s.useState(""),[u,g]=s.useState(""),[x,b]=s.useState(""),[j,v]=s.useState(!1),[y,N]=s.useState(0);async function S(){try{r(!0);const{data:a}=await i.get("/api/v1/technology");d(a.data.technology),r(!1),t.success("Technology data fetched successfully!")}catch{r(!1),t.error("Failed to fetch technology data")}}async function U(a){try{const l=localStorage.getItem("adminToken");await i.delete(`/api/v1/technology/${a}`,{headers:{Authorization:`Bearer ${l}`}}),d(o.filter(n=>n._id!==a)),t.success("Technology item deleted successfully")}catch{t.error("Failed to delete technology item")}}async function w(){try{const a=localStorage.getItem("adminToken"),l={name:h,description:u,price:x,available:j,ratingsAverage:y};await i.patch(`/api/v1/technology/${m._id}`,l,{headers:{Authorization:`Bearer ${a}`}}),d(o.map(n=>n._id===m._id?{...n,...l}:n)),c(!1),t.success("Technology updated successfully")}catch{t.error("Failed to update technology")}}const F=a=>{C(a),p(a.name),g(a.description),b(a.price),v(a.available),N(a.ratingsAverage),c(!0)};return s.useEffect(()=>{S()},[]),e.jsxs(e.Fragment,{children:[e.jsx(D,{children:e.jsx("title",{children:"Technologies Operations"})}),e.jsx("section",{className:"technology-operations my-5 py-5",children:e.jsxs("div",{className:"container mt-5 pt-3",children:[e.jsx("h3",{className:"text-center mb-4",children:"Technology"}),f?e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"spinner-border text-danger",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):o.length===0?e.jsx("p",{className:"text-center text-muted",children:"No technology items found"}):e.jsx("div",{className:"row g-4",children:o.map(a=>e.jsx("div",{className:"col-12 col-md-4",children:e.jsxs("div",{className:"p-4 bg-white shadow-sm rounded border border-danger",children:[e.jsx("div",{className:"text-center mb-3",children:e.jsx("img",{src:a.imageCover&&a.imageCover!=="undefined"?`http://localhost:3000/img/technologys/${a.imageCover}`:"https://placehold.co/600x400",alt:a.name,className:"img-fluid rounded",style:{height:"200px",objectFit:"cover"}})}),e.jsxs("h5",{className:"fw-semibold text-danger text-center pb-2",children:["[ ",a.name," ]"]}),e.jsxs("p",{className:"mb-2 text-muted",children:[e.jsx("strong",{children:"📝 Description:"})," ",a.description]}),e.jsxs("p",{className:"mb-2 text-muted",children:[e.jsx("strong",{children:"💰 Price:"})," $",a.price]}),e.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:e.jsx("span",{className:`badge rounded-0 p-2 ${a.available?"bg-success":"bg-danger"}`,children:a.available?"✅ Available":"❌ Unavailable"})}),e.jsxs("p",{className:"text-muted pb-2 mt-auto",children:[e.jsx("strong",{children:"⭐ Rating:"})," ",a.ratingsAverage]}),e.jsxs("div",{className:"d-flex justify-content-between pt-3 border-top border-danger",children:[e.jsxs("button",{className:"btn btn-primary rounded-0",onClick:()=>F(a),children:["Update ",e.jsx(A,{})]}),e.jsxs("button",{className:"btn btn-danger rounded-0",onClick:()=>U(a._id),children:["Delete ",e.jsx(k,{})]})]})]})},a._id))})]})}),T&&e.jsx("div",{className:"modal fade show",tabIndex:"-1","aria-labelledby":"updateTechnologyModalLabel","aria-hidden":"true",style:{display:"block"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"updateTechnologyModalLabel",children:"Update Technology"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:()=>c(!1)})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:"Name"}),e.jsx("input",{type:"text",className:"form-control",id:"name",value:h,onChange:a=>p(a.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),e.jsx("textarea",{className:"form-control",id:"description",value:u,onChange:a=>g(a.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"price",className:"form-label",children:"Price"}),e.jsx("input",{type:"number",className:"form-control",id:"price",value:x,onChange:a=>b(a.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"available",className:"form-label",children:"Available"}),e.jsxs("select",{className:"form-select",id:"available",value:j,onChange:a=>v(a.target.value==="true"),children:[e.jsx("option",{value:"true",children:"Available"}),e.jsx("option",{value:"false",children:"Unavailable"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"rating",className:"form-label",children:"Rating"}),e.jsx("input",{type:"number",className:"form-control",id:"rating",value:y,onChange:a=>N(a.target.value)})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:()=>c(!1),children:"Close"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:w,children:"Update"})]})]})})})]})}export{E as default};
