import{r as d,j as e,y as r}from"./index-CkFDTInH.js";import{a as h}from"./api-DZWw9RV8.js";import{H as f}from"./Helmet-QCzmYxYa.js";function y(){const[o,m]=d.useState([]),[x,n]=d.useState(!1);async function g(){try{n(!0);const{data:s}=await h.get("/api/v1/packages");m(s.data.package),n(!1),r.success("Packages fetched successfully!")}catch{n(!1),r.error("Failed to fetch packages")}}const p=async s=>{try{const c=localStorage.getItem("adminToken");await h.delete(`/api/v1/packages/${s}`,{headers:{Authorization:`Bearer ${c}`}}),m(t=>t.filter(l=>l._id!==s)),r.success("Package deleted successfully!")}catch{r.error("Failed to delete package")}};return d.useEffect(()=>{g()},[]),e.jsxs(e.Fragment,{children:[e.jsx(f,{children:e.jsx("title",{children:"Packages Operations"})}),e.jsx("section",{className:"packages my-5 py-5",children:e.jsxs("div",{className:"container mt-5 pt-3",children:[e.jsx("h3",{className:"text-center mb-4",children:"Packages"}),x?e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"spinner-border text-danger",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):o.length===0?e.jsx("p",{className:"text-center text-muted",children:"No packages found"}):e.jsx("div",{className:"row g-4",children:o.map(s=>{var c,t,l;return e.jsx("div",{className:"col-12 col-md-6 col-lg-4 mb-4 h-100",children:e.jsxs("div",{className:"package-card p-4 bg-white rounded-lg w-100 h-100 d-flex flex-column border border-danger rounded-3",children:[e.jsx("div",{className:"text-center mb-3",children:e.jsx("img",{src:s.imageCover&&s.imageCover!=="undefined"?`http://localhost:3000/img/packages/${s.imageCover}`:"https://placehold.co/600x400",alt:s.name,className:"img-fluid rounded",style:{height:"250px",objectFit:"cover"}})}),e.jsxs("h5",{className:"fw-semibold text-danger text-center pb-2",children:["[ ",s.name," ]"]}),e.jsxs("p",{className:"text-muted",children:[e.jsx("strong",{children:"📝 Description:"})," ",s.description]}),e.jsxs("p",{className:"text-muted",children:[e.jsx("strong",{children:"💲 Price:"})," $",s.price]}),s.space&&e.jsxs("div",{className:"pb-3",children:[e.jsx("strong",{children:"🛋 Space:"})," ",s.space.name]}),((t=(c=s.space)==null?void 0:c.images)==null?void 0:t.length)>0&&e.jsx("div",{children:e.jsx("div",{className:"d-flex flex-wrap gap-2 mt-2",children:s.space.images.map((a,i)=>e.jsx("img",{src:`http://localhost:3000/img/spaces/${a}`,alt:s.space.name,className:"img-fluid rounded me-2 mb-2",style:{width:"80px",height:"80px",objectFit:"cover"}},i))})}),((l=s.Technology)==null?void 0:l.length)>0&&e.jsxs("div",{className:"pt-3",children:[e.jsx("strong",{children:"🔧 Technologies:"}),e.jsx("ul",{className:"list-unstyled",children:s.Technology.map(a=>{var i;return e.jsxs("li",{className:"mb-2",children:[e.jsx("div",{children:e.jsxs("span",{className:"fw-semibold my-3 d-block",children:["- ",a.name]})}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:(i=a.images)==null?void 0:i.map((j,u)=>e.jsx("img",{src:`http://localhost:3000/img/technologys/${j}`,alt:a.name,className:"img-fluid rounded me-2 mb-2",style:{width:"80px",height:"80px",objectFit:"cover"}},u))})]},a._id)})})]}),e.jsx("div",{className:"text-center mt-3",children:e.jsx("button",{className:"btn btn-danger w-100",onClick:()=>p(s._id),children:"🗑️ Delete Package"})})]})},s._id)})})]})})]})}export{y as default};
