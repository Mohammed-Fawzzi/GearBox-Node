import{r as c,j as e,R as x,y as a}from"./index-DoYqLEuC.js";import{a as d}from"./api-BDs2Ot40.js";import{H as u}from"./Helmet-lAKtP1rb.js";function g(){const[r,o]=c.useState([]),[i,n]=c.useState(!1);async function l(){try{n(!0);const t=localStorage.getItem("adminToken"),{data:s}=await d.get("/api/v1/contact",{headers:{Authorization:`Bearer ${t}`}});o(s.data.contact),n(!1),a.success("Contacts fetched successfully!")}catch{n(!1),a.error("Failed to fetch contacts")}}c.useEffect(()=>{l()},[]);async function m(t){try{const s=localStorage.getItem("adminToken");await d.delete(`/api/v1/contact/${t}`,{headers:{Authorization:`Bearer ${s}`}}),o(r.filter(h=>h._id!==t)),a.success("Contact deleted successfully")}catch{a.error("Failed to delete contact")}}return e.jsxs(e.Fragment,{children:[e.jsx(u,{children:e.jsx("title",{children:"Contacts"})}),e.jsx("section",{className:"contacts my-5 py-5",children:e.jsxs("div",{className:"container mt-5 pt-3",children:[e.jsx("h3",{className:"text-center mb-4",children:"Contacts"}),i?e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"spinner-border text-danger",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):r.length===0?e.jsx("p",{className:"text-center text-muted",children:"No contacts found"}):e.jsx("div",{className:"row g-4",children:r.map(t=>e.jsx("div",{className:"col-12 col-md-4",children:e.jsxs("div",{className:"contact-card p-4 bg-white shadow-sm rounded",children:[e.jsxs("h5",{className:"fw-semibold text-danger text-center pb-2",children:["[ ",t.name," ]"]}),e.jsxs("p",{className:"mb-2 py-3 border-bottom border-top border-danger",children:[e.jsx("strong",{children:"Email:"})," ",e.jsx("a",{href:`mailto:${t.email}`,className:"text-decoration-none",children:t.email})]}),e.jsxs("p",{className:"py-1 text-muted",children:[e.jsx("strong",{children:"Message:"})," ",t.message]}),e.jsx("div",{className:"pt-3 border-top border-danger",children:e.jsxs("button",{className:"btn btn-danger rounded-0 w-100",onClick:()=>m(t._id),children:["Delete ",e.jsx(x,{})]})})]})},t._id))})]})})]})}export{g as default};
