import{r as d,j as e,R as x,y as t}from"./index-CkFDTInH.js";import{a as i}from"./api-DZWw9RV8.js";import{H as u}from"./Helmet-QCzmYxYa.js";function g(){const[l,r]=d.useState(!1),[c,n]=d.useState([]);async function o(){try{r(!0);const s=localStorage.getItem("adminToken"),{data:a}=await i.get("/api/v1/academy",{headers:{Authorization:`Bearer ${s}`}});n(a.data.academy),r(!1),t.success("Academies fetched successfully!")}catch{r(!1),t.error("Failed to fetch academies")}}d.useEffect(()=>{o()},[]);async function m(s){try{const a=localStorage.getItem("adminToken");await i.delete(`/api/v1/academy/${s}`,{headers:{Authorization:`Bearer ${a}`}}),n(c.filter(h=>h._id!==s)),t.success("Academy deleted successfully")}catch{t.error("Failed to delete academy")}}return e.jsxs(e.Fragment,{children:[e.jsx(u,{children:e.jsx("title",{children:"Academies"})}),e.jsx("section",{className:"academies my-5 py-5",children:e.jsxs("div",{className:"container mt-5 pt-3",children:[e.jsx("h3",{className:"text-center mb-4",children:"Academies"}),l?e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"spinner-border text-danger",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):c.length===0?e.jsx("p",{className:"text-center text-muted",children:"No academies found"}):e.jsx("div",{className:"row g-4",children:c.map(s=>e.jsx("div",{className:"col-12 col-md-4",children:e.jsxs("div",{className:"academy-card p-4 bg-white shadow-sm rounded",children:[e.jsxs("h5",{className:"fw-semibold text-danger text-center pb-2",children:["[ ",s.name," ]"]}),e.jsxs("p",{className:"pt-3 border-top border-danger",children:[e.jsx("strong",{children:"Email:"})," ",e.jsx("a",{href:`mailto:${s.email}`,className:"text-decoration-none",children:s.email})]}),e.jsxs("p",{className:"text-muted",children:[e.jsx("strong",{children:"Phone:"})," ",s.phoneNumber]}),e.jsxs("p",{className:"pt-3 text-muted border-top border-danger",children:[e.jsx("strong",{children:"Courses:"})," ",s.courses]}),e.jsx("div",{className:"pt-3 border-top border-danger",children:e.jsxs("button",{className:"btn btn-danger rounded-0 w-100",onClick:()=>m(s._id),children:["Delete ",e.jsx(x,{})]})})]})},s._id))})]})})]})}export{g as default};
