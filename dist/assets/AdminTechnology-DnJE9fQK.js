import{a as j,r as t,j as e,y as m}from"./index-DoYqLEuC.js";import{u as y}from"./formik.esm-DO93-7Li.js";import{c as N,d as A,e as h,a as g}from"./index.esm-ikoG5Ndk.js";import{a as C}from"./api-BDs2Ot40.js";import{H as B}from"./Helmet-lAKtP1rb.js";function I(){let p=j();const[o,l]=t.useState(!1),[c,u]=t.useState(null),[s,v]=t.useState([]);async function x(r){try{l(!0);const d=localStorage.getItem("adminToken"),i=new FormData;if(i.append("name",r.name),i.append("description",r.description),i.append("price",r.price),i.append("ratingsAverage",r.ratingsAverage),i.append("image",r.image),i.append("available",r.available),c&&i.append("imageCover",c),s.length>0)for(let n=0;n<s.length;n++)i.append("images",s[n]);let{data:b}=await C.post("/api/v1/technology",i,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"multipart/form-data"}});console.log(b.status),m.success("Technology added successfully"),p("/admin-dashboard"),l(!1)}catch{l(!1),m.error("Failed to add technology, please try again!")}}const f=N({name:g().required("Name is required"),description:g().required("Description is required"),price:h().required("Price is required"),ratingsAverage:h().min(0).max(5).required("Ratings Average is required"),available:A().required("Availability is required")});let a=y({initialValues:{name:"",description:"",price:"",ratingsAverage:"",available:!1},validationSchema:f,onSubmit:x});return e.jsxs(e.Fragment,{children:[e.jsx(B,{children:e.jsx("title",{children:"Add Technology"})}),e.jsx("section",{className:"technology my-5 py-5",children:e.jsx("div",{className:"container mt-5 pt-4",children:e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-md-8",children:e.jsxs("form",{className:"p-4",onSubmit:a.handleSubmit,children:[e.jsx("h3",{className:"text-center mb-4",children:"Add Technology"}),e.jsxs("div",{className:"form-floating mb-3",children:[e.jsx("input",{type:"text",id:"name",placeholder:"Name",className:"form-control",value:a.values.name,onChange:a.handleChange,onBlur:a.handleBlur}),e.jsx("label",{htmlFor:"name",children:"Name"}),a.errors.name&&a.touched.name&&e.jsx("div",{className:"alert alert-danger p-2 my-2 rounded-0",children:a.errors.name})]}),e.jsxs("div",{className:"form-floating mb-3",children:[e.jsx("input",{type:"text",id:"description",placeholder:"Description",className:"form-control",value:a.values.description,onChange:a.handleChange,onBlur:a.handleBlur}),e.jsx("label",{htmlFor:"description",children:"Description"}),a.errors.description&&a.touched.description&&e.jsx("div",{className:"alert alert-danger p-2 my-2 rounded-0",children:a.errors.description})]}),e.jsxs("div",{className:"form-floating mb-3",children:[e.jsx("input",{type:"number",id:"price",placeholder:"Price",className:"form-control",value:a.values.price,onChange:a.handleChange,onBlur:a.handleBlur}),e.jsx("label",{htmlFor:"price",children:"Price"}),a.errors.price&&a.touched.price&&e.jsx("div",{className:"alert alert-danger p-2 my-2 rounded-0",children:a.errors.price})]}),e.jsxs("div",{className:"form-floating mb-3",children:[e.jsx("input",{type:"number",id:"ratingsAverage",placeholder:"Ratings Average",className:"form-control",value:a.values.ratingsAverage,onChange:a.handleChange,onBlur:a.handleBlur}),e.jsx("label",{htmlFor:"ratingsAverage",children:"Ratings Average"}),a.errors.ratingsAverage&&a.touched.ratingsAverage&&e.jsx("div",{className:"alert alert-danger p-2 my-2 rounded-0",children:a.errors.ratingsAverage})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"imageCover",className:"form-label",children:"Image Cover"}),e.jsx("input",{type:"file",id:"imageCover",className:"form-control",accept:"image/*",onChange:r=>u(r.target.files[0])})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"images",className:"form-label",children:"Images"}),e.jsx("input",{type:"file",id:"images",className:"form-control",accept:"image/*",multiple:!0,onChange:r=>v(Array.from(r.target.files))})]}),e.jsxs("div",{className:"form-check mb-3",children:[e.jsx("input",{type:"checkbox",id:"available",className:"form-check-input",checked:a.values.available,onChange:a.handleChange,onBlur:a.handleBlur}),e.jsx("label",{className:"form-check-label",htmlFor:"available",children:"Available"}),a.errors.available&&a.touched.available&&e.jsx("div",{className:"alert alert-danger p-2 my-2 rounded-0",children:a.errors.available})]}),e.jsx("button",{type:"submit",className:"btn btn-danger rounded-0 text-center mx-auto w-100",disabled:o||!(a.isValid&&a.dirty),children:o?"Submitting...":"Add Technology"})]})})})})})]})}export{I as default};
